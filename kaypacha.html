<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>Kay Pacha</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.js'></script>
<!--Need this to make geojson load-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="js/leaflet.label.js"></script>
<link href='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.css' rel='stylesheet' />
<!-- Bootstrap Core CSS -->
<link href="css/bootstrap.min.css" rel="stylesheet">
<!-- Custom CSS -->
<link href="css/custom.css" rel="stylesheet">
</head>

<body>
 <div class="wrapper">
  <header>
   <script src="js/leaflet.defaultextent.js"></script>
   <nav class="navbar navbar-inverse role="navigation">
        <div class="container">
          <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="kaypacha.html">Kay Pacha</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li>
                        <div class="dropdown">
                          <button class="dropbtn">Regions</button>
                          <div class="dropdown-content">
                           <!--<a href="amazonas.html">Amazonas</a>
                            <a href="ancash.html">Ancash</a>
                            <a href="arequipa.html">Arequipa</a>
                            <a href="cajamarca.html">Cajamarca</a>-->
                            <a href="cusco.html" class="">Cusco</a>
                            <!--<a href="junin.html">Junin</a>-->
                          </div>
                         </div>
                    </li>
                    <li>
                        <div class="dropdown">
                          <button class="dropbtn">Treks</button>
                          <div class="dropdown-content">
                            <a href="ausangate.html">Ausangate</a>
                            <a href="incatrail.html">Classic Inca Trail</a>
                            <a href="#">Salkantay</a>
                    </li>
                    <li>
                        <div class="dropdown">
                          <button class="dropbtn">About</button>
                          <div class="dropdown-content">
                            <a href="#">Contact</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>
   <div class="mapInstructions">Mapping the best treks in Peru</div>
  </header>
<div id='map'></div>
<div id="credits">
 <p>Cusco, Arequipa, Huaraz, Junin, Amazonia, Lima, Ica, etc</p>
</div>
</div> <!--wrapper-->
<script>
L.mapbox.accessToken = 'pk.eyJ1IjoicnVzc2x5b244IiwiYSI6IjBSaDVoeW8ifQ.UMzpeudvSJ3dHxAtKiakFg';
var map = L.mapbox.map('map', null, {
  maxZoom:18,
  defaultExtentControl: true
}).setView([-9.3651, -73.73], 5);
var layers = {
      Outdoors: L.mapbox.tileLayer('mapbox.outdoors'),
      Streets: L.mapbox.tileLayer('mapbox.streets'),
      Satellite: L.mapbox.tileLayer('mapbox.satellite')
  };

  layers.Outdoors.addTo(map);
  L.control.layers(layers).addTo(map);
    
// Create a global variable set to null that can hold our data
var departmentLayer = null;


// Set style function that sets fill color 
function style() {
    return {
        fillOpacity: 0,
        weight: 1,
        opacity: 0.4,
        color: '#75561c',
        dashArray: '3'
    };
}

function highlightFeature(e) {
    var layer = e.target;

    layer.setStyle({
        weight: 5,
        color: '#666',
        dashArray: '',
        fillOpacity: 0
    });

    if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
        layer.bringToFront();
    }
    info.update(layer.feature.properties);
}

function resetHighlight(e) {
    departmentLayer.resetStyle(e.target);
    info.update();
}


function zoomToFeature(e) {
    map.fitBounds(e.target.getBounds());
}


function onEachFeature(feature, layer) {
    layer.on({
        mouseover: highlightFeature,
        mouseout: resetHighlight,
        click: zoomToFeature
    });
}

//function labelEachFeature(feature) {
   // layer.bindLabel(feature.properties.D_NOMB, { 'noHide': true });

// Add department polygons
$.getJSON("data/Department.geojson",function(data){
    departmentLayer = L.geoJson(data, {style: style,
    onEachFeature: onEachFeature
   
     }).addTo(map);
});

var info = L.control();

info.onAdd = function (map) {
    this._div = L.DomUtil.create('div', 'info'); // create a div with a class "info"
    this.update();
    return this._div;
};

// method that we will use to update the control based on feature properties passed
info.update = function (props) {
    this._div.innerHTML = (props ? props.D_NOMB + '</b><br />'
        : 'Hover on a Department');
};

info.addTo(map);













</script>
</body>
</html>
<!-- mapbox://styles/mapbox/outdoors-v9-->