<!DOCTYPE html>
<html>
<head>
    <meta charset=utf-8 />
    <title>Kay Pacha</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link href="css/bootstrap.min.css" rel="stylesheet"><!-- Bootstrap Core CSS -->
    <link href="css/custom.css" rel="stylesheet"><!-- Custom CSS -->
    <link href='https://api.mapbox.com/mapbox.js/v3.0.1/mapbox.css' rel='stylesheet' />
    <script src='https://api.mapbox.com/mapbox.js/v3.0.1/mapbox.js'></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script><!--Need this to make geojson load-->
</head>

<body>
 <div class="wrapper">
  <header>
   <nav class="navbar navbar-inverse role="navigation">
        <div class="container">
          <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    
                </button>
                <a class="navbar-brand" href=#>Kay Pacha</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li>
                        <div class="dropdown">
                          <button class="dropbtn">Treks</button>
                          <div class="dropdown-content">
                            <a href="ausangate.html">Ausangate</a>
                            <a href="#">Machu Picchu</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
<div id='map'></div>
<script>
L.mapbox.accessToken = 'pk.eyJ1IjoicnVzc2x5b244IiwiYSI6IjBSaDVoeW8ifQ.UMzpeudvSJ3dHxAtKiakFg';
var map = L.mapbox.map('map', null, {maxZoom:18}).setView([-13.163, -72.545], 15);
var layers = {
      Streets: L.mapbox.tileLayer('mapbox.streets'),
      Outdoors: L.mapbox.styleLayer('mapbox://styles/russlyon8/ciwjh10yq000d2qo73t44eva0'),
      Satellite: L.mapbox.styleLayer('mapbox://styles/russlyon8/cioowi3rs001rbnnnsmkskehw')
  };

  layers.Outdoors.addTo(map);
  L.control.layers(layers).addTo(map);
 
 
 
// Add cusco.geojson
var archSite = null;

// Get arch sites

var sqlQueryArch = "SELECT * FROM archSiteMachu";

// Set CartoDB Username
var cartoUserName = "redclayantony";

// Function to add treksMachu
function showAll(){
  if(map.hasLayer(archSiteMachu)){
      map.removeLayer(archSiteMachu);
  }}
  
  //archIcon
var archIcon = L.icon({
    iconUrl: 'icons/archIcon2.svg',
    iconSize: [28,28],
    iconAnchor: [5,5],
    popupanchor: [0,-3]
});

 // Get CartoDB selection as GEOJSON and Add to Map
 $.getJSON("https://"+cartoUserName+".carto.com/api/v2/sql?format=GeoJSON&q="+sqlQueryArch, function(data) {
    archSite = L.geoJson(data,{
       onEachFeature: function (feature, layer) {
           layer.bindPopup(feature.properties.name);
    }, pointToLayer: function (feature, latlng) {
        var marker = L.marker(latlng,{icon: archIcon});
        return marker;
          //layer.cartodb_id=feature.properties.cartodb_id;
       }
    }).addTo(map);
});

// Add trailheadcusco.geojson
var trailHead = null;

// Database queries

// Get trailheads

var sqlQueryTH = "SELECT * FROM trailheadscusco";

// Function to add trailheads
function showAll(){
  if(map.hasLayer(trailheadscusco)){
      map.removeLayer(trailheadscusco);
  }}
  
  //archIcon
var trailheadIcon = L.icon({
    iconUrl: 'icons/walker.svg',
    iconSize: [14,14],
    iconAnchor: [5,5],
    popupanchor: [0,-3]
});

 // Get CartoDB selection as GEOJSON and Add to Map
 $.getJSON("https://"+cartoUserName+".carto.com/api/v2/sql?format=GeoJSON&q="+sqlQueryTH, function(data) {
    trailHead = L.geoJson(data,{
       onEachFeature: function (feature, layer) {
           layer.bindPopup(feature.properties.name);
    }, pointToLayer: function (feature, latlng) {
        var marker = L.marker(latlng,{icon: trailheadIcon});
        return marker;
          //layer.cartodb_id=feature.properties.cartodb_id;
       }
    }).addTo(map);
});

//Run showAll function when doc loads
$( document ).ready(function() {
  showAll();
  });  
  
// Add treksMachuEditGeo.geojson
var treksMachu = null;

// Database queries

var sqlQueryInca = "SELECT * FROM treksmachugeo";

// Set CArtoDB Username
var cartoUserName = "redclayantony";

//machuTrek line style
var trekStyle = {
 color: "#aa6e8e",
 weight: 2,
 opacity: 1,
 dashArray: "5"
};

// Function to add treksMachu
function showAll(){
  if(map.hasLayer(treksmachugeo)){
      map.removeLayer(treksmachugeo);
  }}
 // Get CartoDB selection as GEOJSON and Add to Map
 $.getJSON("https://"+cartoUserName+".carto.com/api/v2/sql?format=GeoJSON&q="+sqlQueryInca, function(data) {
    treksMachu = L.geoJson(data,{
       style: trekStyle,
       onEachFeature: function (feature, layer) {
          layer.bindPopup(feature.properties.label);
          layer.cartodb_id=feature.properties.cartodb_id;
       }
    }).addTo(map);
});

// Add sanctuarymp.geojson
var sanctMachu = null;

// Database queries

var sqlQueryMachu = "SELECT * FROM sanctuarymp";

//sanctMP style
var sanctStyle = {
 color: "#659D32",
 fill: false,
 weight: 7,
 opacity: 0.7,
 dashArray: "1"
};

// Function to add sanctMachu
function showAll(){
  if(map.hasLayer(sanctuarymp)){
      map.removeLayer(sanctuarymp);
  }}
 // Get CartoDB selection as GEOJSON and Add to Map
 $.getJSON("https://"+cartoUserName+".carto.com/api/v2/sql?format=GeoJSON&q="+sqlQueryMachu, function(data) {
    sanctMachu = L.geoJson(data,{
       style: sanctStyle,
       onEachFeature: function (feature, layer) {
          layer.bindPopup(feature.properties.label);
          layer.cartodb_id=feature.properties.cartodb_id;
       }
    }).addTo(map);
});



//Run showAll function when doc loads
$( document ).ready(function() {
  showAll();
  });

</script>
</body>
</html>
<!-- mapbox://styles/mapbox/outdoors-v9-->