<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>Kay Pacha</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.js'></script>
<!--Need this to make geojson load-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<link href='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.css' rel='stylesheet' />
<!-- Bootstrap Core CSS -->
<link href="css/bootstrap.min.css" rel="stylesheet">
<!-- Custom CSS -->
<link href="css/custom.css" rel="stylesheet">
</head>

<body>
 <div class="wrapper">
  <header>
   <nav class="navbar navbar-inverse role="navigation">
        <div class="container">
          <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="kaypacha.html">Kay Pacha</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li>
                        <div class="dropdown">
                          <button class="dropbtn">Regions</button>
                          <div class="dropdown-content">
                           <!--<a href="amazonas.html">Amazonas</a>
                            <a href="ancash.html">Ancash</a>
                            <a href="arequipa.html">Arequipa</a>
                            <a href="cajamarca.html">Cajamarca</a>-->
                            <a href="#" class="">Cusco</a>
                            <!--<a href="junin.html">Junin</a>-->
                          </div>
                         </div>
                    </li>
                    <li>
                        <div class="dropdown">
                          <button class="dropbtn">Treks</button>
                          <div class="dropdown-content">
                            <a href="ausangate.html">Ausangate</a>
                            <a href="#">Classic Inca Trail</a>
                            <a href="#">Salkantay</a>
                    </li>
                    <li>
                        <div class="dropdown">
                          <button class="dropbtn">About</button>
                          <div class="dropdown-content">
                            <a href="#">Contact</a>
                    </li>
                </ul>
            </div>
        </div>
        <!-- /.container -->
    </nav>
<div id='map'style="width: 100%; height: 600px;"></div>

<!--Need this to make geojson load-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script>
L.mapbox.accessToken = 'pk.eyJ1IjoicnVzc2x5b244IiwiYSI6IjBSaDVoeW8ifQ.UMzpeudvSJ3dHxAtKiakFg';
var map = L.mapbox.map('map', null, {
  maxZoom:18
}).setView([-13.163, -72.545], 14);
var layers = {
      Streets: L.mapbox.tileLayer('mapbox.streets'),
      Outdoors: L.mapbox.tileLayer('mapbox.outdoors'),
      Satellite: L.mapbox.tileLayer('mapbox.satellite')
  };

  layers.Streets.addTo(map);
  L.control.layers(layers).addTo(map);
  
// Add cusco.geojson
var archSite = null;

// Database queries

// Get arch sites

var sqlQueryArch = "SELECT * FROM archSiteMachu";

// Set CArtoDB Username
var cartoUserName = "redclayantony";

// Function to add treksMachu
function showAll(){
  if(map.hasLayer(archSiteMachu)){
      map.removeLayer(archSiteMachu);
  }}
  
  //archIcon
var archIcon = L.icon({
    iconUrl: 'icons/archIcon.svg',
    iconSize: [12,12],
    iconAnchor: [5,5],
    popupanchor: [0,-3]
});

 // Get CartoDB selection as GEOJSON and Add to Map
 $.getJSON("http://"+cartoUserName+".carto.com/api/v2/sql?format=GeoJSON&q="+sqlQueryArch, function(data) {
    archSite = L.geoJson(data,{
       onEachFeature: function (feature, layer) {
           layer.bindPopup(feature.properties.name);
    }, pointToLayer: function (feature, latlng) {
        var marker = L.marker(latlng,{icon: archIcon});
        return marker;
          //layer.cartodb_id=feature.properties.cartodb_id;
       }
    }).addTo(map);
});

// Add trailheadcusco.geojson
var trailHead = null;

// Database queries

// Get trailheads

var sqlQueryTH = "SELECT * FROM trailheadscusco";

// Function to add trailheads
function showAll(){
  if(map.hasLayer(trailheadscusco)){
      map.removeLayer(trailheadscusco);
  }}
  
  //archIcon
var trailheadIcon = L.icon({
    iconUrl: 'icons/walker.svg',
    iconSize: [14,14],
    iconAnchor: [5,5],
    popupanchor: [0,-3]
});

 // Get CartoDB selection as GEOJSON and Add to Map
 $.getJSON("http://"+cartoUserName+".carto.com/api/v2/sql?format=GeoJSON&q="+sqlQueryTH, function(data) {
    trailHead = L.geoJson(data,{
       onEachFeature: function (feature, layer) {
           layer.bindPopup(feature.properties.name);
    }, pointToLayer: function (feature, latlng) {
        var marker = L.marker(latlng,{icon: trailheadIcon});
        return marker;
          //layer.cartodb_id=feature.properties.cartodb_id;
       }
    }).addTo(map);
});

//Run showAll function when doc loads
$( document ).ready(function() {
  showAll();
  });  
  
// Add treksMachuEditGeo.geojson
var treksMachu = null;

// Database queries

var sqlQueryInca = "SELECT * FROM treksMachuEdit";

// Set CArtoDB Username
var cartoUserName = "redclayantony";

//machuTrek line style
var trekStyle = {
 color: "#4d4d4d",
 weight: 3,
 opacity: 1,
 dashArray: "5"
};

// Function to add treksMachu
function showAll(){
  if(map.hasLayer(treksMachuEditgeo)){
      map.removeLayer(treksMachuEditgeo);
  }}
 // Get CartoDB selection as GEOJSON and Add to Map
 $.getJSON("http://"+cartoUserName+".carto.com/api/v2/sql?format=GeoJSON&q="+sqlQueryInca, function(data) {
    treksMachu = L.geoJson(data,{
       style: trekStyle,
       onEachFeature: function (feature, layer) {
          layer.bindPopup(feature.properties.label);
          layer.cartodb_id=feature.properties.cartodb_id;
       }
    }).addTo(map);
});

// Add sanctuarymp.geojson
var sanctMachu = null;

// Database queries

var sqlQueryMachu = "SELECT * FROM sanctuarymp";

//sanctMP style
var sanctStyle = {
 color: "#659D32",
 fill: false,
 weight: 7,
 opacity: 0.7,
 dashArray: "1"
};

// Function to add sanctMachu
function showAll(){
  if(map.hasLayer(sanctuarymp)){
      map.removeLayer(sanctuarymp);
  }}
 // Get CartoDB selection as GEOJSON and Add to Map
 $.getJSON("http://"+cartoUserName+".carto.com/api/v2/sql?format=GeoJSON&q="+sqlQueryMachu, function(data) {
    sanctMachu = L.geoJson(data,{
       style: sanctStyle,
       onEachFeature: function (feature, layer) {
          layer.bindPopup(feature.properties.label);
          layer.cartodb_id=feature.properties.cartodb_id;
       }
    }).addTo(map);
});

//Run showAll function when doc loads
$( document ).ready(function() {
  showAll();
  });

</script>
<p>Cusco, Arequipa, Huaraz, Junin, Amazonia, Lima, Ica, etc</p>
</body>
</html>
<!-- mapbox://styles/mapbox/outdoors-v9-->